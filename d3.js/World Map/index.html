<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <title>Evolution of the number of ads</title>
        <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
        <script src="/datamaps.world.min.js"></script>
        <!-- <script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>-->
    </head>
    
    <body>
        
        <div id="container" style="width: 1200px; height: 900px;"></div>
        <script>

function colores_google(n) {
  var colores_g = ["#3366cc", "#ff9900","#dc3912", "#109618", "#990099", "#0099c6", "#b82e2e", "#994499", "#6633cc", "#e67300", "#8b0707", "#651067", "#329262", "#5574a6", "#3b3eac"];
    
  return colores_g[n % colores_g.length];
}            


bubble_map = new Datamap({
  element: document.getElementById("container"),

  geographyConfig: {
    popupOnHover: false,
    highlightOnHover: false
  },
  fills: {
    defaultFill :'#dddddd'
  }
});

            
function createBubble (data) {
    
    bubble_map.bubbles(data,{
      popupTemplate: function(geo, data) {
        return '<div class="hoverinfo">Number of ads : ' + data.radius + ' by '  + data.name + ''
      }
    });
    
                d3.selectAll("circle")
                .style("fill", function(d, i) {return d.color}); 

}

var pause = false;            
d3.json("jsonWorldMap.json", function(data) {

    
        data.forEach(function(d) {
            d.data.latitude = +d.data.latitude;
            d.data.longitude = +d.data.longitude;
            d.data.radius = +d.data.radius;
        });

        var i=0;
        interval = setInterval(function(){
            if(!this.pause){
                createBubble(data[i].data, data[i].date);
                i++;
                if(i==1){

                }
                if(i==data.length){
                    i=0;
                }
            }
        },500)  
       

       
});
            
//Barre de temps
            

// Pour l'europe :
            
function start(){
    console.log("Hello world");
    this.pause =true;
}
function resume(){
    
}
function pause(){
    
}

        </script>
    <button onclick="start()">Click me</button>
        
    </body>
